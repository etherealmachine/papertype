(this.webpackJsonppapertype=this.webpackJsonppapertype||[]).push([[0],{22:function(e,t,a){e.exports=a(46)},27:function(e,t,a){},37:function(e,t,a){var n=a(38);"string"===typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(40)(n,r);n.locals&&(e.exports=n.locals)},38:function(e,t,a){(t=a(39)(!1)).push([e.i,"\n  ._1K0xKFlE3XhuIq8I1FpjrW {\n    display: flex;\n    flex-direction: column;\n  }\n  ._2J_xqngm_eIl8ZrigD7lSb {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-items: center;\n  }\n  ._1JSVmurgdOPc-PKM7FF5v {\n    margin: 10px;\n  }\n  ._3jO4CunHV7PC3ncQkrSKW7 {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    border: 2px solid black;\n    border-radius: 5px;\n    width: 220px;\n    height: 312px;\n    box-sizing: border-box;\n  }\n  ._2pqPWH7aS4AiIGVWnw7a1f ._3zFNyKBQG3UzEUD87dC0AX {\n    width: 8.5in;\n    height: 11in;\n    display: flex;\n    flex-direction: column;\n  }\n  ._2pqPWH7aS4AiIGVWnw7a1f ._3jyUrJebGbBUHLQ2-JI1UR {\n    display: flex;\n    flex-direction: row;\n  }\n  ._2pqPWH7aS4AiIGVWnw7a1f ._1JSVmurgdOPc-PKM7FF5v {\n    margin: 0;\n    width: 2.5in;\n    height: 3.5in;\n  }\n  ._2pqPWH7aS4AiIGVWnw7a1f ._3jO4CunHV7PC3ncQkrSKW7 {\n    width: 2.5in;\n    height: 3.5in;\n  }\n",""]),t.locals={app:"_1K0xKFlE3XhuIq8I1FpjrW",cards:"_2J_xqngm_eIl8ZrigD7lSb",cardWrapper:"_1JSVmurgdOPc-PKM7FF5v",card:"_3jO4CunHV7PC3ncQkrSKW7",print:"_2pqPWH7aS4AiIGVWnw7a1f",cardPage:"_3zFNyKBQG3UzEUD87dC0AX",cardRow:"_3jyUrJebGbBUHLQ2-JI1UR"},e.exports=t},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),c=a.n(l),i=(a(27),a(7)),s=a.n(i),o=a(21),u=a(5),p=a(9),m=a(17),d=a.n(m),f=a(18),g=a.n(f),h=a(20),E=a(1),v=a(10),y=a.n(v),b=a(37),x=function(e){var t=e.name,a=e.flavor,n=e.rules;return r.a.createElement("div",{className:b.card+" card"},r.a.createElement("h1",{className:"title"},t),r.a.createElement("div",{className:"flavor"},a),r.a.createElement("div",{className:"rules"},null===n||void 0===n?void 0:n.map((function(e,t){return r.a.createElement("div",{key:t,className:"rule"},e)}))))},w=function(){return r.a.createElement("div",{className:b.card},r.a.createElement("div",{className:"card-back"}))};function S(){return(S=Object(p.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.entries(t).map(function(){var e=Object(p.a)(s.a.mark((function e(t){var a,n,r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(u.a)(t,2),n=a[0],r=a[1],e.next=3,d()(r,{x:r.offsetLeft,y:r.offsetTop});case 3:return l=e.sent,e.abrupt("return",{name:n,canvas:l});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useRef)({}),i=window.localStorage.getItem("papertype-cards"),s=[];null!==i&&(s=JSON.parse(i));var p=Object(n.useState)(s),m=Object(u.a)(p,2),d=m[0],f=m[1],v=Object(n.useRef)(null),O=window.localStorage.getItem("papertype-css"),j=Object(n.useState)(O||""),_=Object(u.a)(j,2),N=_[0],I=_[1],P=Object(n.useRef)(null),k=d.map((function(e){return r.a.createElement("div",{key:e.name,ref:function(t){return c.current[e.name]=t},className:b.cardWrapper},r.a.createElement(x,Object.assign({key:e.name},e)))})),C=r.a.createElement("div",{className:b.cardWrapper,ref:function(e){return c.current["Card Back"]=e}},r.a.createElement(w,null)),W=0===d.length?[]:[C].concat(k);return r.a.createElement(h.a,null,r.a.createElement("style",null,N),r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/print"},r.a.createElement("div",{className:b.app},r.a.createElement("div",{className:b.cards+" "+b.print},y.a.chunk(W,9).map((function(e,t){return r.a.createElement("div",{key:t,className:b.cardPage},y.a.chunk(e,3).map((function(e,t){return r.a.createElement("div",{key:t,className:b.cardRow},e)})))}))))),r.a.createElement(E.a,{path:"/"},r.a.createElement("div",{className:b.app},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginTop:"20px"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("h1",null,"Step 1"),r.a.createElement("h2",null,"Upload Card JSON"),r.a.createElement("div",null,r.a.createElement("a",{href:"https://raw.githubusercontent.com/etherealmachine/papertype/master/src/examples/scurvy_and_rum.json"},"Example")),r.a.createElement("input",{className:"form-control-file",type:"file",ref:v,onChange:function(e){if(null!==e.target.files){var t=new FileReader;t.onload=function(e){if(null!==e.target&&null!==e.target.result)try{var t=JSON.parse(e.target.result.toString()),a=Object.entries(t).map((function(e){var t=Object(u.a)(e,2),a=t[0],n=t[1];return Object(o.a)({name:a},n)}));window.localStorage.setItem("papertype-cards",JSON.stringify(a)),f(a)}catch(n){alert(n)}},t.readAsText(e.target.files[0])}},accept:"application/json"})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("h1",null,"Step 2 (Optional)"),r.a.createElement("h2",null,"Upload Card CSS"),r.a.createElement("div",null,r.a.createElement("a",{href:"https://raw.githubusercontent.com/etherealmachine/papertype/master/src/examples/scurvy_and_rum.css"},"Example")),r.a.createElement("input",{className:"form-control-file",type:"file",ref:P,onChange:function(e){if(null!==e.target.files){var t=new FileReader;t.onload=function(e){if(null!==e.target&&null!==e.target.result)try{window.localStorage.setItem("papertype-css",e.target.result.toString()),I(e.target.result.toString())}catch(t){alert(t)}},t.readAsText(e.target.files[0])}},accept:"text/css"})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("h1",null,"Step 3"),r.a.createElement("h2",null,"Get Your Cards"),r.a.createElement("button",{className:"btn btn-primary d-flex align-items-center"+(a?" disabled":""),onClick:function(){var e=c.current;e&&(l(!0),function(e){return S.apply(this,arguments)}(e).then((function(e){var t=new g.a;e.forEach((function(e){t.file(e.name+".png",function(e){if("string"!==typeof e)throw new Error("Invalid argument: dataURI must be a string");for(var t=e.split(","),a=t[0].split(":")[1].split(";")[0],n=atob(t[1]),r=n.length,l=new ArrayBuffer(r),c=new Uint8Array(l),i=0;i<r;i++)c[i]=n.charCodeAt(i);return new Blob([c],{type:a})}(e.canvas.toDataURL("image/png")))})),t.generateAsync({type:"base64"}).then((function(e){var t=document.createElement("a");t.href="data:application/zip;base64,"+e,t.download="cards.zip",t.click(),l(!1)}))})))}},r.a.createElement("span",null,"Download PNGs"),a&&r.a.createElement("span",{className:"spinner-border text-light",role:"status"})),r.a.createElement("div",null,"or"),r.a.createElement("a",{href:"/print"},"Printable PDF Layout"))),r.a.createElement("div",{className:b.cards},W)))))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.21e918f8.chunk.js.map